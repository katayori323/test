<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>test</title>
    <input type="text" placeholder="enter your access key here" class="js--key"><input type="button" value="apply" class="js--apply" />
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  </head>
  <body>
    <script>

(function(){
  var url = 'https://api.gnavi.co.jp/RestSearchAPI/20150630/?callback=?';
  var params = {
    keyid: '',
    format: 'json',
    latitude: 35.010348,
    longitude: 135.768738,
    range: 1
  };

  var showResult = function(result){
    if ( result.total_hit_count > 0 ) {
      var res = '';
      var res2 = '';
      var a = result.total_hit_count;
      alert( a + '件の結果が見つかりました。\n' );
      alert( result.hit_per_page + '件の結果が見つかりました。\n' );
      for ( var i in result.rest ){
      //    res += result.rest[i].id + ' '+c+' '+ result.rest[i].name + ' ' + result.rest[i].access.line + ' ' + result.rest[i].access.station + ' ' + result.rest[i].access.walk + '分\n';
          res2+='<a href='+result.rest[i].url+'>test'+i+'</a><br>';
      }
    //  alert(res);
      $('.test').html(res2);
    } else {
      alert( '検索結果が見つかりませんでした。' );
    }
  }

  $(document).on('click', '.js--apply', function(){
    params.keyid = $('.js--key').val();
    $.getJSON(url, params, function(result){
      showResult(result);
    });
  });

})(jQuery);

</script>
<div class="test">

</div>
  </body>
</html>
